<!DOCTYPE html>
<html>
<head>
  <title>Calculator</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <script src="./tsparticles.confetti.bundle.min.js"></script>
  <style>
    @font-face {
      font-family: 'comic';
      src: url(./fonts/comic.woff2) format('woff2');
    }

    * { 
      font-family: 'Comic Sans MS', 'comic', 'Roboto', sans-serif; 
    }
    html, body {
      margin: 0;
      padding: 0;
    }

    .hidden {
      visibility: hidden;
    }

    nav {
      font-size: 22px;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      image-rendering: pixelated;
    }

    nav img {
    }

    #settings {
      padding-left: 10px;
    }

    #settings input, #settings button {
      font-size: 22px;
    }

    #settings input[type="radio"] {
      transform: scale(1.5);
      margin-top: -9px;
      vertical-align: middle;
    }

    #settings label {
      color: lightgray;
    }

    #settings input[type="radio"]:checked+label {
      color: black;
    }

    #restartButton {
      margin-left: auto;
    }

    nav img:hover {
      animation: shiftDown 0.25s step-start;
    }

    nav img:active {
      transform: translateY(3px);
    }

    @keyframes shiftDown {
      to { transform: translateY(3px); } 
    }

    main {
      transform-origin: top left;
      width: 1024px;
      height: 768px;
      /* border: 5px solid green; */
      box-sizing: border-box;
      
      display: flex;
      align-items: center;
      justify-content: space-around;

    }

    #problem {
      font-size: 125px;
      font-variant-numeric: tabular-nums;
      margin-left: 25px;
    }

    #problem_table {
      border-collapse: collapse;
    }


    /*
    #problem_table tr td:first-child {
      padding-left: 25px;
    }
    */

    #problem_table tr td:last-child {
      padding-right: 25px;
    }

    #operand2_row {
      line-height: 1.1;
    }

    #operand2_row td {
      border-bottom: 7px solid black;
    }

    #operand2_row #operation {
      font-size: 155px;
    }

    #calculator {
      font-size: 45px;
      border: 5px solid black;
      border-radius: 50px;
      padding: 15px 7px;
      user-select: none;
    }

    #calculator table {
      border-spacing: 8px;
    }

    #calculator td.circleButton {
      border-radius: 50%;
      border: 2px solid black;
      background-color: white;
      width: 80px;
      height: 80px; 
      text-align: center;
    }

    #calculator td.orange {
      background-color: orange;
      font-size: 55px;
    }

    #calculator td.gray {
      background-color: lightgray;
    }

    #calculator sup {
      margin-right: -7px;
      vertical-align: top;
      line-height: 1.3;
    }

    #calculator sub {
      margin-left: -7px;
      vertical-align: bottom;
      line-height: 1.3;
    }

    #zeroButton {
      border-radius: 50px;
      border: 2px solid black;
      width: 160px;
      height: 80px; 
      text-align: left;
      background-color: white;
    }

    #calculatorDisplay {
      border: 2px solid black;
      background-color: rgba(211, 211, 211, 0.34);
      border-radius: 12.5px;
    }

    #calculatorDisplay span {
      font-size: 100px;
      padding-right: 25px;
    }

    @keyframes calcButtonTap {
      0% { filter: brightness(100%); }
      50% { filter: brightness(70%); }
    }

    .circleButton:active, #zeroButton:active {
      animation: calcButtonTap linear 0.25s;
    }

  </style>
</head>
<body>
  <nav>
    <!-- <img src="./images/Buttons/Settings.png" id="settingsButton" height="42"> -->
    <div id="settings">
      <input type="radio" id="addition" name="additionOrSubtraction" value="addition" checked>
      <label for="addition">Addition</label>
      <input type="radio" id="subtraction" name="additionOrSubtraction" value="subtraction">
      <label for="subtraction">Subtraction</label>
      using numbers up to <input type="text" value="50" size="3">
      <button>Save</button>
    </div>
    <img src="./images/Buttons/Restart.png" id="restartButton" height="42">
  </nav>
  <div id="rest">
  <main>
    <!-- <p>Hello, world!</p>
    <p align="right">Hello, world!</p> -->
    <div id="problem">
      <table id="problem_table">
        <tr><td></td><td>13</td></tr>
        <tr id="operand2_row"><td id="operation">+</td><td align="right">7</td></tr>
        <tr><td></td><td align="right" id="problem_answer">20</td></tr>
      </table>
    </div>
    <div id="calculator">
      <table>
        <tr><td colspan="4" align="right" id="calculatorDisplay"><span>42</span></td></tr>
        <tr><td class="circleButton gray">C</td><td class="circleButton gray"><sup>+</sup>/<sub>–</sub></td><td class="circleButton gray">%</td><td class="circleButton orange">÷</td></tr>
        <tr><td class="circleButton">7</td><td class="circleButton">8</td><td class="circleButton">9</td><td class="circleButton orange">×</td></tr>
        <tr><td class="circleButton">4</td><td class="circleButton">5</td><td class="circleButton">6</td><td class="circleButton orange">–</td></tr>
        <tr><td class="circleButton">1</td><td class="circleButton">2</td><td class="circleButton">3</td><td class="circleButton orange">+</td></tr>
        <tr><td colspan="2" align="left" id="zeroButton">&nbsp;&nbsp;0</td><td class="circleButton">.</td><td class="circleButton orange">=</td></tr>
      </table>
    </div>
  </main>
  </div>

<script>
function playFireworks() {
  setTimeout(() => {
    confetti({
      particleCount: 77,
      spread: 70,
      origin: { x: 0.50, y: 0.6 },
    });
  }, 0);
}

function resize() {
  // scale & center main based on inner height
  let main = document.getElementsByTagName("main")[0];
  let width = window.innerWidth;
  let height = window.innerHeight - document.getElementsByTagName("nav")[0].getBoundingClientRect().height;
  let maxWidth = 1024;
  let maxHeight = 768;
  let scale = Math.min(width/maxWidth, height/maxHeight);
  // console.log(`width: ${width}, height: ${height}, scale: ${scale}`);
  main.style.transform = 'scale(' + scale + ')';
  let marginLeft = Math.max(0, (width - main.getBoundingClientRect().width)/2);
  // console.log(marginLeft);
  document.getElementById("rest").style.marginLeft = `${marginLeft}px`;
}

document.addEventListener("DOMContentLoaded", (e) => {
  resize();
  window.addEventListener("resize", resize);
});
</script>
</body>
</html>
